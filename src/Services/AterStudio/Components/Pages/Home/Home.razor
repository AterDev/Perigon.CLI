@page "/"
@using System.Diagnostics
@inherits PageBase

@inject SolutionManager SolutionManager

<PageTitle>@Lang(Localizer.Solution)</PageTitle>

<FluentStack Orientation="Orientation.Vertical">
  <FluentToolbar Class="w-100">
    <FluentButton Appearance="Appearance.Stealth"
                  IconStart="@(new Icons.Regular.Size24.OpenFolder())"
                  OnClick="AddLocalProject">
      @Lang(Localizer.Load, Localizer.Project)
    </FluentButton>
    <FluentButton Appearance="Appearance.Stealth"
                  IconStart="@(new Icons.Regular.Size24.Add())"
                  onclick='()=>NavigationManager.NavigateTo("/create")'>
      @Lang(Localizer.Create, Localizer.Solution)
    </FluentButton>
  </FluentToolbar>

  @if (solutions.Count == 0)
  {
    <FluentStack HorizontalAlignment="HorizontalAlignment.Center"
                 Orientation="Orientation.Vertical">
      <FluentLabel Typo="Typography.H6">
        @Lang(Localizer.AddNewSolution)
      </FluentLabel>
    </FluentStack>
  }
  else
  {
    <FluentStack Orientation="Orientation.Horizontal"
                 HorizontalAlignment="HorizontalAlignment.Start"
                 HorizontalGap="12"
                 Wrap="true"
                 Class="px-2"
                 VerticalGap="8">
      @foreach (var solution in solutions)
      {
        <FluentCard Style="min-width:300px;" Class="col">
          <FluentStack Orientation="Orientation.Vertical" VerticalGap="4">
            <FluentStack Orientation="Orientation.Horizontal"
                         VerticalAlignment="VerticalAlignment.Center">
              @if (solution.SolutionType == SolutionType.DotNet)
              {
                <img src="assets/logo_net.svg" height="30" width="30">
              }
              @if (solution.SolutionType == SolutionType.Node)
              {
                <img src="assets/nodejs.svg" height="30" width="30">
              }
              <FluentLabel Typo="Typography.H3">@solution.DisplayName</FluentLabel>

              <FluentButton Id="setting_btn"
                            Title="@Lang(Localizer.Project, Localizer.Setting)"
                            OnClick="()=>OpenConfigDialogAsync(solution)"
                            IconStart="@(new Icons.Regular.Size24.Settings())"
                            Appearance="Appearance.Stealth">
              </FluentButton>
            </FluentStack>

            <FluentLabel Typo="Typography.Subject" Color="Color.Accent"
                         Class="cursor"
                         title="Open solution"
                         @onclick="() => OpenSolution(solution)">@solution.Name</FluentLabel>
            <FluentLabel Typo="Typography.Body">@solution.Path</FluentLabel>
            <FluentStack Orientation="Orientation.Horizontal"
                         VerticalAlignment="VerticalAlignment.Center"
                         HorizontalAlignment="HorizontalAlignment.End">

              <FluentButton Class="delete-action"
                            IconEnd="@(new Icons.Regular.Size20.Delete().WithColor(Color.Warning))"
                            Appearance="Appearance.Stealth"
                            OnClick="()=>DeleteProject(solution)" />

              <FluentButton Appearance="Appearance.Lightweight"
                            OnClick='()=>ToSolution(solution.Id)'>
                @Lang(Localizer.Enter, Localizer.Workbench)
              </FluentButton>
            </FluentStack>
          </FluentStack>
        </FluentCard>
      }
    </FluentStack>
  }
</FluentStack>
