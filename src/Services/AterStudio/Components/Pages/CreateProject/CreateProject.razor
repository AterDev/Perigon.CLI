@page "/create"
@using Share.Models.CommandDtos
@inherits PageBase

<FluentStack Orientation="Orientation.Vertical"
             VerticalGap="12"
             Class="p-2">
  <FluentLabel Typo="Typography.PaneHeader">
    @Lang(Localizer.Create, Localizer.Solution)
  </FluentLabel>

  <FluentLabel Typo="Typography.H3">基本信息</FluentLabel>
  <FluentStack Orientation="Orientation.Vertical"
               VerticalGap="2">
    <FluentTextField Label="@Lang(Localizer.Solution, Localizer.Name)"
                     @bind-Value="AddDto.Name"
                     Required="true" />
  </FluentStack>
  <FluentStack Orientation="Orientation.Vertical"
               VerticalGap="2">
    <FluentTextField Label="@Lang(Localizer.Path)"
                     @bind-Value="AddDto.Path"
                     Required="true" />
  </FluentStack>

  <FluentLabel Typo="Typography.H3">选项配置</FluentLabel>
  <FluentStack Orientation="Orientation.Vertical">
    <FluentStack>
      @* <FluentSelect Items="@(Enum.GetValues<DbType>())"
                    @bind-SelectedOption="@Db"
                    Label="数据库类型" />
      <FluentSelect Items="@(Enum.GetValues<CacheType>())"
                    @bind-SelectedOption="@Cahce"
                    Label="缓存类型" /> *@
      <FluentTextField Label="默认密码" @bind-Value="AddDto.DefaultPassword" />
    </FluentStack>
  </FluentStack>

  <FluentStack Orientation="Orientation.Vertical">
    <FluentLabel Typo="Typography.H3">
      @Lang(Localizer.DbConnectionString)
    </FluentLabel>
    <FluentTextField Label="读数据库" @bind-Value="AddDto.CommandDbConnStrings" />
    <FluentTextField Label="写数据库" @bind-Value="AddDto.QueryDbConnStrings" />
    <FluentTextField Label="缓存连接" @bind-Value="AddDto.CacheConnStrings" />
  </FluentStack>
</FluentStack>

@code {
  CreateSolutionDto AddDto { get; set; } = null!;

  protected override void OnInitialized()
  {
    AddDto = new CreateSolutionDto
    {
      Name = string.Empty,
      Path = string.Empty,
    };
  }
}