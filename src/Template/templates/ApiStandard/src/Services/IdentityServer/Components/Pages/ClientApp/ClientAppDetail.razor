@page "/client-app/{ClientId}"
@inherits PageBase
@attribute [Authorize]

@if (editContext is not null)
{
    <EditForm EditContext="editContext" style="max-width:600px">
        <DataAnnotationsValidator />

        <FluentStack Orientation="Orientation.Vertical" HorizontalAlignment="HorizontalAlignment.Start" VerticalGap="8">
            <FluentLabel Typo="Typography.PaneHeader">
                @Lang(LanguageKey.ClientApp, LanguageKey.Detail)
            </FluentLabel>

            <FluentTextField @bind-Value="EditDto!.ClientName"
                             Label="@Localizer.Get(LanguageKey.ClientName)"
                             Placeholder="@Localizer.Get(LanguageKey.ClientName)"
                             class="w-100" Required />
            <FluentValidationMessage For="() => EditDto.ClientName"></FluentValidationMessage>

            <FluentTextArea Rows="3" @bind-Value="RedirectUris"
                            Placeholder="@Localizer.Get(LanguageKey.RedirectUris)" Class="w-100"
                            Label="@Localizer.Get(LanguageKey.RedirectUris)"
                            Required />
            <FluentLabel Typo="Typography.Body" Color="Color.Info">
                @Localizer.Get(LanguageKey.RowValueTip)
            </FluentLabel>
            <FluentValidationMessage For="() => EditDto.RedirectUris"></FluentValidationMessage>


            <FluentStack Orientation="Orientation.Horizontal"
                         HorizontalAlignment="HorizontalAlignment.End">
                <FluentButton Appearance="Appearance.Accent"
                              Type="ButtonType.Button"
                              Disabled="!formValid"
                              OnClick="SaveAsync">
                    @Localizer.Get(LanguageKey.Save)
                </FluentButton>
                <FluentButton Appearance="Appearance.Neutral" OnClick="@Cancel">
                    @Localizer.Get(LanguageKey.Cancel)
                </FluentButton>
            </FluentStack>
            <FluentValidationSummary />
        </FluentStack>
    </EditForm>
}
else
{
    <FluentProgressRing></FluentProgressRing>
}
